/* --- Variables & Reset --- */
:root {
    /* Color Palette */
    --c-hadir: #10b981; /* Green */
    --c-sakit: #06b6d4; /* Teal/Cyan */
    --c-izin: #3b82f6;  /* Blue */
    --c-alfa: #ef4444;  /* Red */
    --c-gray-50: #f9fafb;
    --c-gray-100: #f3f4f6;
    --c-gray-400: #9ca3af;
    --c-gray-800: #1f2937;
    --c-white: #ffffff;
    --c-primary: #2563eb; /* Primary Blue Button */
    
    /* Spacing & Radius */
    --radius-md: 8px;
    --radius-full: 9999px;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
body { background-color: var(--c-gray-100); color: var(--c-gray-800); padding: 20px; }

/* --- Global Utilities --- */
.visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
.text-right { text-align: right; }
.hidden { display: none !important; }

/* --- Layout Container --- */
.att-container { max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; gap: 16px; }
.att-card { background: var(--c-white); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); padding: 16px; width: 100%; }

/* --- Component 1: Summary Legend --- */
.att-summary-legend { display: flex; justify-content: space-around; align-items: center; gap: 8px; }
.legend-item { display: flex; flex-direction: column; align-items: center; gap: 4px; }
.legend-icon { width: 32px; height: 32px; border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; border: 1.5px solid currentColor; }
.legend-item.status-hadir { color: var(--c-hadir); }
.legend-item.status-sakit { color: var(--c-sakit); }
.legend-item.status-izin { color: var(--c-izin); }
.legend-item.status-alfa { color: var(--c-alfa); }
.legend-icon svg { width: 18px; height: 18px; }
.legend-label { font-size: 12px; font-weight: 500; }

/* --- Component 2: Note Input --- */
.att-label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; }
.att-textarea { width: 100%; border: 1px solid var(--c-gray-400); border-radius: var(--radius-md); padding: 12px; min-height: 80px; font-size: 14px; resize: vertical; }
.att-textarea:focus { outline: 2px solid var(--c-primary); border-color: transparent; }

/* --- Component 3: Student List --- */
.att-student-list-card { padding: 0; overflow: hidden; } /* Padding handled by children */
.att-list-header { display: flex; padding: 16px; background: var(--c-gray-50); font-size: 12px; font-weight: 700; text-transform: uppercase; color: var(--c-gray-400); border-bottom: 1px solid var(--c-gray-100); }
.att-list-header span:nth-child(1) { width: 30px; } /* Index */
.att-list-header span:nth-child(2) { flex: 1; }    /* Name */
.att-list-header span:nth-child(3) { width: 100px; } /* Status Control */

.att-student-row { display: flex; align-items: center; padding: 12px 16px; border-bottom: 1px solid var(--c-gray-100); height: 60px; transition: background 0.2s; }
.att-student-row:last-child { border-bottom: none; }
.student-index { width: 30px; font-size: 14px; color: var(--c-gray-400); }
.student-name { flex: 1; font-weight: 500; font-size: 15px; padding-right: 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.att-control-area { width: 140px; display: flex; justify-content: flex-end; align-items: center; position: relative; }

/* --- Component 4: Interaction & Selectors --- */
.att-trigger-btn { background: none; border: none; font-size: 20px; color: var(--c-gray-400); cursor: pointer; padding: 4px 8px; border-radius: 4px; }
.att-trigger-btn:hover { background-color: var(--c-gray-100); color: var(--c-gray-800); }

/* Selected State Icon (Replaces trigger) */
.att-selected-display { width: 32px; height: 32px; border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1.5px solid currentColor; }
.att-selected-display svg { width: 18px; height: 18px; }
/* Colors for selected display */
.att-selected-display.hadir { color: var(--c-hadir); background: rgba(16, 185, 129, 0.1); }
.att-selected-display.sakit { color: var(--c-sakit); background: rgba(6, 182, 212, 0.1); }
.att-selected-display.izin { color: var(--c-izin); background: rgba(59, 130, 246, 0.1); }
.att-selected-display.alfa { color: var(--c-alfa); background: rgba(239, 68, 68, 0.1); }

/* The Inline Selector Options */
.att-options-selector { display: flex; gap: 6px; position: absolute; right: 0; background: var(--c-white); padding-left: 10px; /* overlay prevention */ }

.opt-item { cursor: pointer; }
.opt-icon { width: 32px; height: 32px; border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; border: 1px solid var(--c-gray-400); color: var(--c-gray-400); transition: all 0.2s; }
.opt-icon svg { width: 16px; height: 16px; }

/* Option Hover States */
.opt-item:hover .opt-icon { transform: scale(1.1); }
.opt-item.status-hadir:hover .opt-icon { border-color: var(--c-hadir); color: var(--c-hadir); }
.opt-item.status-sakit:hover .opt-icon { border-color: var(--c-sakit); color: var(--c-sakit); }
.opt-item.status-izin:hover .opt-icon { border-color: var(--c-izin); color: var(--c-izin); }
.opt-item.status-alfa:hover .opt-icon { border-color: var(--c-alfa); color: var(--c-alfa); }

/* --- Component 5: Count Summary --- */
.att-count-summary { display: flex; justify-content: space-between; padding: 12px 24px; }
.count-item { display: flex; flex-direction: column; align-items: center; }
.count-label { font-size: 11px; text-transform: uppercase; color: var(--c-gray-400); margin-bottom: 2px; }
.count-val { font-size: 18px; font-weight: 700; }
.val-hadir { color: var(--c-hadir); }
.val-sakit { color: var(--c-sakit); }
.val-izin { color: var(--c-izin); }
.val-alfa { color: var(--c-alfa); }

/* --- Component 6: Button --- */
.btn-submit { width: 100%; background-color: var(--c-primary); color: white; border: none; padding: 14px; border-radius: var(--radius-md); font-size: 16px; font-weight: 600; cursor: pointer; transition: opacity 0.2s; }
.btn-submit:hover { opacity: 0.9; }
.btn-submit:active { transform: translateY(1px); }

/* Responsive Tweak */
@media (max-width: 380px) {
    .att-control-area { width: 100%; justify-content: space-between; margin-top: 4px; }
    .att-student-row { flex-wrap: wrap; height: auto; }
}
